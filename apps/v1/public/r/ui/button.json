{
  "name": "button",
  "type": "ui",
  "description": "Aurora-styled button with gradient variants and motion presets",
  "files": [
    {
      "path": "components/ui/button.tsx",
      "type": "component",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  [\n    \"inline-flex items-center justify-center gap-2\",\n    \"rounded-lg font-medium\",\n    \"transition-all duration-200\",\n    \"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background\",\n    \"disabled:pointer-events-none disabled:opacity-50\",\n  ],\n  {\n    variants: {\n      variant: {\n        aurora: [\n          \"relative overflow-hidden\",\n          \"bg-aurora\",\n          \"text-primary-foreground\",\n          \"shadow-lg\",\n          \"hover:shadow-[0_0_24px_rgba(var(--ap-primary),0.4)]\",\n          \"shine-effect\",\n          \"before:absolute before:inset-0\",\n          \"before:translate-x-[-100%]\",\n          \"before:transition-transform\",\n        ],\n        glass: [\n          \"bg-background/60 backdrop-blur-md\",\n          \"border border-border/50\",\n          \"text-foreground\",\n          \"hover:bg-background/80\",\n          \"hover:border-primary/50\",\n          \"hover:shadow-[0_0_16px_rgba(var(--ap-primary),0.2)]\",\n        ],\n        ghost: [\n          \"bg-transparent\",\n          \"text-foreground\",\n          \"hover:bg-muted/50\",\n          \"hover:text-primary\",\n        ],\n      },\n      size: {\n        sm: \"h-8 px-3 text-sm\",\n        md: \"h-10 px-4 text-sm\",\n        lg: \"h-12 px-6 text-base\",\n      },\n      /** 定常モーション: float / shine / wave は常時再生 */\n      motionIdle: {\n        none: \"\",\n        float: \"animate-ap-float\",\n        shine: \"\",\n        wave: \"ap-wave-motion\",\n      },\n      /** クリック時モーション: pop / snap / bounce / wiggle / jelly はクリックで発火 */\n      motionClick: {\n        none: \"\",\n        pop: \"\",\n        snap: \"\",\n        bounce: \"\",\n        wiggle: \"\",\n        jelly: \"\",\n      },\n    },\n    compoundVariants: [\n      // When motion=shine, use ap-shine-motion (continuous sweep). Do not add hover sweep so it doesn’t conflict.\n      { variant: \"aurora\", motionIdle: \"shine\", class: \"ap-shine-motion\" },\n      // When motion=wave, background animation handles the effect. Do not add hover sweep so it doesn't conflict.\n      { variant: \"aurora\", motionIdle: \"wave\", class: \"\" },\n      // When motion is not shine or wave, add hover sweep for aurora.\n      {\n        variant: \"aurora\",\n        motionIdle: [\"float\", \"none\"],\n        class: \"hover:before:translate-x-[100%]\",\n      },\n    ],\n    defaultVariants: {\n      variant: \"aurora\",\n      size: \"md\",\n      motionIdle: \"none\",\n      motionClick: \"pop\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  /** @deprecated motionIdle と motionClick に分離しました。指定時は両方にマッピングします。 */\n  motion?: \"pop\" | \"float\" | \"shine\" | \"wave\" | \"snap\" | \"bounce\" | \"wiggle\" | \"jelly\" | \"none\"\n  asChild?: boolean\n  leftIcon?: React.ReactNode\n  rightIcon?: React.ReactNode\n}\n\nconst IDLE_VALUES = [\"float\", \"shine\", \"wave\"] as const\nconst CLICK_VALUES = [\"pop\", \"snap\", \"bounce\", \"wiggle\", \"jelly\"] as const\ntype IdleMotion = (typeof IDLE_VALUES)[number]\ntype ClickMotion = (typeof CLICK_VALUES)[number]\n\nfunction isIdleMotion(value: ButtonProps[\"motion\"]): value is IdleMotion {\n  return value === \"float\" || value === \"shine\" || value === \"wave\"\n}\n\nfunction isClickMotion(value: ButtonProps[\"motion\"]): value is ClickMotion {\n  return (\n    value === \"pop\" ||\n    value === \"snap\" ||\n    value === \"bounce\" ||\n    value === \"wiggle\" ||\n    value === \"jelly\"\n  )\n}\n\nfunction resolveMotion(\n  motion?: ButtonProps[\"motion\"],\n  motionIdle?: \"none\" | \"float\" | \"shine\" | \"wave\" | null,\n  motionClick?: \"none\" | \"pop\" | \"snap\" | \"bounce\" | \"wiggle\" | \"jelly\" | null\n): { motionIdle: \"none\" | \"float\" | \"shine\" | \"wave\"; motionClick: \"none\" | \"pop\" | \"snap\" | \"bounce\" | \"wiggle\" | \"jelly\" } {\n  if (motion != null) {\n    if (motion === \"none\") return { motionIdle: \"none\", motionClick: \"none\" }\n    if (isIdleMotion(motion)) return { motionIdle: motion, motionClick: \"none\" }\n    if (isClickMotion(motion)) return { motionIdle: \"none\", motionClick: motion }\n    return { motionIdle: \"none\", motionClick: \"none\" }\n  }\n  return {\n    motionIdle: motionIdle ?? \"none\",\n    motionClick: motionClick ?? \"pop\",\n  }\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  (\n    {\n      className,\n      variant,\n      size,\n      motionIdle,\n      motionClick,\n      motion,\n      asChild = false,\n      leftIcon,\n      rightIcon,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const [activeAnimation, setActiveAnimation] = React.useState<string | null>(null)\n    const { motionIdle: idle, motionClick: click } = resolveMotion(motion, motionIdle, motionClick)\n\n    const handleClick = (e: React.MouseEvent<HTMLButtonElement>) => {\n      switch (click) {\n        case \"pop\":\n          setActiveAnimation(\"animate-ap-pop\")\n          setTimeout(() => setActiveAnimation(null), 200)\n          break\n        case \"bounce\":\n          setActiveAnimation(\"animate-ap-bounce\")\n          setTimeout(() => setActiveAnimation(null), 300)\n          break\n        case \"wiggle\":\n          setActiveAnimation(\"animate-ap-wiggle\")\n          setTimeout(() => setActiveAnimation(null), 500)\n          break\n        case \"jelly\":\n          setActiveAnimation(\"animate-ap-jelly\")\n          setTimeout(() => setActiveAnimation(null), 300)\n          break\n      }\n      props.onClick?.(e)\n    }\n\n    const handleMouseDown = (e: React.MouseEvent<HTMLButtonElement>) => {\n      if (click === \"snap\") {\n        const button = e.currentTarget\n        button.style.transform = \"scale(0.97)\"\n      }\n      props.onMouseDown?.(e)\n    }\n\n    const handleMouseUp = (e: React.MouseEvent<HTMLButtonElement>) => {\n      if (click === \"snap\") {\n        const button = e.currentTarget\n        button.style.transform = \"scale(1)\"\n      }\n      props.onMouseUp?.(e)\n    }\n\n    const handleMouseLeave = (e: React.MouseEvent<HTMLButtonElement>) => {\n      if (click === \"snap\") {\n        const button = e.currentTarget\n        button.style.transform = \"scale(1)\"\n      }\n      props.onMouseLeave?.(e)\n    }\n\n    return (\n      <Comp\n        {...props}\n        className={cn(\n          buttonVariants({ variant, size, motionIdle: idle, motionClick: click }),\n          activeAnimation,\n          className\n        )}\n        ref={ref}\n        onClick={handleClick}\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseLeave}\n      >\n        {leftIcon && <span className=\"shrink-0\">{leftIcon}</span>}\n        {children}\n        {rightIcon && <span className=\"shrink-0\">{rightIcon}</span>}\n      </Comp>\n    )\n  }\n)\n\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"
    }
  ],
  "dependencies": ["class-variance-authority", "clsx", "tailwind-merge"],
  "devDependencies": [],
  "registryDependencies": []
}
