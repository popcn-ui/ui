{
  "$schema": "../registry-schema.json",
  "name": "color-picker",
  "type": "ui",
  "description": "Color picker component with RGB and HSL sliders",
  "files": [
    {
      "path": "components/ui/color-picker.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\nimport { Input } from \"@/components/ui/input\"\nimport { Slider } from \"@/components/ui/slider\"\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface ColorPickerProps {\n  value?: string\n  onChange?: (color: string) => void\n  disabled?: boolean\n  className?: string\n  format?: \"hex\" | \"rgb\" | \"hsl\"\n}\n\nfunction ColorPicker({\n  value = \"#000000\",\n  onChange,\n  disabled = false,\n  className,\n  format = \"hex\",\n}: ColorPickerProps) {\n  const [color, setColor] = React.useState(value)\n  const [open, setOpen] = React.useState(false)\n\n  React.useEffect(() => {\n    setColor(value)\n  }, [value])\n\n  const hexToRgb = (hex: string) => {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n    return result\n      ? {\n          r: parseInt(result[1], 16),\n          g: parseInt(result[2], 16),\n          b: parseInt(result[3], 16),\n        }\n      : { r: 0, g: 0, b: 0 }\n  }\n\n  const rgbToHsl = (r: number, g: number, b: number) => {\n    r /= 255\n    g /= 255\n    b /= 255\n    const max = Math.max(r, g, b)\n    const min = Math.min(r, g, b)\n    let h = 0,\n      s = 0\n    const l = (max + min) / 2\n\n    if (max !== min) {\n      const d = max - min\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min)\n      switch (max) {\n        case r:\n          h = ((g - b) / d + (g < b ? 6 : 0)) / 6\n          break\n        case g:\n          h = ((b - r) / d + 2) / 6\n          break\n        case b:\n          h = ((r - g) / d + 4) / 6\n          break\n      }\n    }\n\n    return {\n      h: Math.round(h * 360),\n      s: Math.round(s * 100),\n      l: Math.round(l * 100),\n    }\n  }\n\n  const rgb = hexToRgb(color)\n  const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b)\n\n  const handleHexChange = (hex: string) => {\n    if (/^#[0-9A-F]{6}$/i.test(hex)) {\n      setColor(hex)\n      onChange?.(hex)\n    }\n  }\n\n  const handleRgbChange = (channel: \"r\" | \"g\" | \"b\", value: number) => {\n    const newRgb = { ...rgb, [channel]: value }\n    const newHex = `#${[newRgb.r, newRgb.g, newRgb.b]\n      .map((x) => {\n        const hex = x.toString(16)\n        return hex.length === 1 ? \"0\" + hex : hex\n      })\n      .join(\"\")}`\n    setColor(newHex)\n    onChange?.(newHex)\n  }\n\n  const handleHslChange = (channel: \"h\" | \"s\" | \"l\", value: number) => {\n    const newHsl = { ...hsl, [channel]: value }\n    const hslToRgb = (h: number, s: number, l: number) => {\n      s /= 100\n      l /= 100\n      const c = (1 - Math.abs(2 * l - 1)) * s\n      const x = c * (1 - Math.abs(((h / 60) % 2) - 1))\n      const m = l - c / 2\n      let r = 0,\n        g = 0,\n        b = 0\n\n      if (0 <= h && h < 60) {\n        r = c\n        g = x\n        b = 0\n      } else if (60 <= h && h < 120) {\n        r = x\n        g = c\n        b = 0\n      } else if (120 <= h && h < 180) {\n        r = 0\n        g = c\n        b = x\n      } else if (180 <= h && h < 240) {\n        r = 0\n        g = x\n        b = c\n      } else if (240 <= h && h < 300) {\n        r = x\n        g = 0\n        b = c\n      } else if (300 <= h && h < 360) {\n        r = c\n        g = 0\n        b = x\n      }\n\n      return {\n        r: Math.round((r + m) * 255),\n        g: Math.round((g + m) * 255),\n        b: Math.round((b + m) * 255),\n      }\n    }\n\n    const newRgb = hslToRgb(newHsl.h, newHsl.s, newHsl.l)\n    const newHex = `#${[newRgb.r, newRgb.g, newRgb.b]\n      .map((x) => {\n        const hex = x.toString(16)\n        return hex.length === 1 ? \"0\" + hex : hex\n      })\n      .join(\"\")}`\n    setColor(newHex)\n    onChange?.(newHex)\n  }\n\n  const formatColor = () => {\n    switch (format) {\n      case \"rgb\":\n        return `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`\n      case \"hsl\":\n        return `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`\n      default:\n        return color\n    }\n  }\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          className={cn(\"w-full justify-start gap-2\", className)}\n          disabled={disabled}\n        >\n          <div\n            className=\"h-4 w-4 rounded border border-border/60\"\n            style={{ backgroundColor: color }}\n          />\n          <span className=\"font-mono text-sm\">{formatColor()}</span>\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-64 p-4\" align=\"start\">\n        <div className=\"space-y-4\">\n          {/* Color Preview */}\n          <div\n            className=\"h-32 w-full rounded-lg border border-border/60\"\n            style={{ backgroundColor: color }}\n          />\n\n          {/* Hex Input */}\n          <div className=\"space-y-2\">\n            <label className=\"text-xs font-medium\">Hex</label>\n            <Input\n              value={color}\n              onChange={(e) => handleHexChange(e.target.value)}\n              className=\"font-mono\"\n              placeholder=\"#000000\"\n            />\n          </div>\n\n          {/* RGB Sliders */}\n          <div className=\"space-y-3\">\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Red</span>\n                <span>{rgb.r}</span>\n              </div>\n              <Slider\n                value={[rgb.r]}\n                onValueChange={([value]) => handleRgbChange(\"r\", value)}\n                max={255}\n                step={1}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Green</span>\n                <span>{rgb.g}</span>\n              </div>\n              <Slider\n                value={[rgb.g]}\n                onValueChange={([value]) => handleRgbChange(\"g\", value)}\n                max={255}\n                step={1}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-xs\">\n                <span>Blue</span>\n                <span>{rgb.b}</span>\n              </div>\n              <Slider\n                value={[rgb.b]}\n                onValueChange={([value]) => handleRgbChange(\"b\", value)}\n                max={255}\n                step={1}\n              />\n            </div>\n          </div>\n        </div>\n      </PopoverContent>\n    </Popover>\n  )\n}\n\nexport { ColorPicker, type ColorPickerProps }\n"
    }
  ],
  "dependencies": ["lucide-react", "clsx", "tailwind-merge"],
  "registryDependencies": ["popover", "button", "input", "slider"]
}
