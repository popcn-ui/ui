{
  "$schema": "../registry-schema.json",
  "name": "file-upload",
  "type": "ui",
  "description": "File upload component with drag and drop support",
  "files": [
    {
      "path": "components/ui/file-upload.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { UploadIcon, XIcon, FileIcon } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface FileUploadProps {\n  accept?: string\n  multiple?: boolean\n  maxSize?: number // in bytes\n  onFilesChange?: (files: File[]) => void\n  disabled?: boolean\n  className?: string\n}\n\nfunction FileUpload({\n  accept,\n  multiple = false,\n  maxSize,\n  onFilesChange,\n  disabled = false,\n  className,\n}: FileUploadProps) {\n  const [files, setFiles] = React.useState<File[]>([])\n  const [dragActive, setDragActive] = React.useState(false)\n  const inputRef = React.useRef<HTMLInputElement>(null)\n\n  const handleFiles = (fileList: FileList | null) => {\n    if (!fileList) return\n\n    const newFiles = Array.from(fileList)\n    const validFiles: File[] = []\n\n    for (const file of newFiles) {\n      if (maxSize && file.size > maxSize) {\n        console.warn(`File ${file.name} exceeds maximum size of ${maxSize} bytes`)\n        continue\n      }\n      validFiles.push(file)\n    }\n\n    const updatedFiles = multiple ? [...files, ...validFiles] : validFiles\n    setFiles(updatedFiles)\n    onFilesChange?.(updatedFiles)\n  }\n\n  const handleDrag = (e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (e.type === \"dragenter\" || e.type === \"dragover\") {\n      setDragActive(true)\n    } else if (e.type === \"dragleave\") {\n      setDragActive(false)\n    }\n  }\n\n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n    setDragActive(false)\n\n    if (disabled) return\n\n    handleFiles(e.dataTransfer.files)\n  }\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault()\n    handleFiles(e.target.files)\n  }\n\n  const handleRemove = (index: number) => {\n    const newFiles = files.filter((_, i) => i !== index)\n    setFiles(newFiles)\n    onFilesChange?.(newFiles)\n  }\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return \"0 Bytes\"\n    const k = 1024\n    const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\"]\n    const i = Math.floor(Math.log(bytes) / Math.log(k))\n    return Math.round(bytes / Math.pow(k, i) * 100) / 100 + \" \" + sizes[i]\n  }\n\n  return (\n    <div className={cn(\"space-y-4\", className)}>\n      <div\n        className={cn(\n          \"relative flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg transition-colors\",\n          dragActive\n            ? \"border-primary bg-primary/5\"\n            : \"border-border/60 bg-muted/30\",\n          disabled && \"opacity-50 cursor-not-allowed\"\n        )}\n        onDragEnter={handleDrag}\n        onDragLeave={handleDrag}\n        onDragOver={handleDrag}\n        onDrop={handleDrop}\n      >\n        <input\n          ref={inputRef}\n          type=\"file\"\n          accept={accept}\n          multiple={multiple}\n          onChange={handleChange}\n          disabled={disabled}\n          className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n        />\n        <div className=\"flex flex-col items-center justify-center gap-2\">\n          <UploadIcon className=\"h-8 w-8 text-muted-foreground\" />\n          <div className=\"text-sm text-center\">\n            <span className=\"text-primary font-medium\">Click to upload</span> or\n            drag and drop\n          </div>\n          {accept && (\n            <div className=\"text-xs text-muted-foreground\">\n              Accepted: {accept}\n            </div>\n          )}\n          {maxSize && (\n            <div className=\"text-xs text-muted-foreground\">\n              Max size: {formatFileSize(maxSize)}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {files.length > 0 && (\n        <div className=\"space-y-2\">\n          <div className=\"text-sm font-medium\">Uploaded Files</div>\n          <div className=\"space-y-2\">\n            {files.map((file, index) => (\n              <div\n                key={index}\n                className=\"flex items-center justify-between p-3 rounded-lg border border-border/60 bg-background/60 backdrop-blur-md\"\n              >\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                  <FileIcon className=\"h-5 w-5 text-muted-foreground shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"text-sm font-medium truncate\">{file.name}</div>\n                    <div className=\"text-xs text-muted-foreground\">\n                      {formatFileSize(file.size)}\n                    </div>\n                  </div>\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  motion=\"none\"\n                  onClick={() => handleRemove(index)}\n                  disabled={disabled}\n                  className=\"shrink-0\"\n                >\n                  <XIcon className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport { FileUpload, type FileUploadProps }\n"
    }
  ],
  "dependencies": ["lucide-react", "clsx", "tailwind-merge"],
  "registryDependencies": ["button"]
}
