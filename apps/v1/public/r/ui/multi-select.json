{
  "$schema": "../registry-schema.json",
  "name": "multi-select",
  "type": "ui",
  "description": "Multi-select component with checkboxes and badges",
  "files": [
    {
      "path": "components/ui/multi-select.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { XIcon, CheckIcon, ChevronDownIcon } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\"\nimport { Badge } from \"@/components/ui/badge\"\n\ninterface MultiSelectOption {\n  label: string\n  value: string\n  disabled?: boolean\n}\n\ninterface MultiSelectProps {\n  options: MultiSelectOption[]\n  value?: string[]\n  onValueChange?: (value: string[]) => void\n  placeholder?: string\n  disabled?: boolean\n  className?: string\n  maxCount?: number\n}\n\nfunction MultiSelect({\n  options,\n  value = [],\n  onValueChange,\n  placeholder = \"Select items...\",\n  disabled = false,\n  className,\n  maxCount,\n}: MultiSelectProps) {\n  const [open, setOpen] = React.useState(false)\n\n  const selectedOptions = React.useMemo(() => {\n    return options.filter((option) => value.includes(option.value))\n  }, [options, value])\n\n  const handleSelect = (optionValue: string) => {\n    if (disabled) return\n\n    const newValue = value.includes(optionValue)\n      ? value.filter((v) => v !== optionValue)\n      : [...value, optionValue]\n\n    if (maxCount && newValue.length > maxCount) {\n      return\n    }\n\n    onValueChange?.(newValue)\n  }\n\n  const handleRemove = (optionValue: string, e: React.MouseEvent) => {\n    e.stopPropagation()\n    if (disabled) return\n    onValueChange?.(value.filter((v) => v !== optionValue))\n  }\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          className={cn(\n            \"w-full justify-between text-left font-normal min-h-10 h-auto\",\n            !value.length && \"text-muted-foreground\",\n            className\n          )}\n          disabled={disabled}\n        >\n          <div className=\"flex flex-wrap gap-1 flex-1\">\n            {selectedOptions.length === 0 ? (\n              <span>{placeholder}</span>\n            ) : (\n              selectedOptions.map((option) => (\n                <Badge\n                  key={option.value}\n                  variant=\"secondary\"\n                  className=\"mr-1 mb-1\"\n                >\n                  {option.label}\n                  <button\n                    className=\"ml-1 ring-offset-background rounded-full outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\"\n                    onKeyDown={(e) => {\n                      if (e.key === \"Enter\") {\n                        handleRemove(option.value, e as any)\n                      }\n                    }}\n                    onMouseDown={(e) => {\n                      e.preventDefault()\n                      e.stopPropagation()\n                    }}\n                    onClick={(e) => handleRemove(option.value, e)}\n                  >\n                    <XIcon className=\"h-3 w-3 text-muted-foreground hover:text-foreground\" />\n                  </button>\n                </Badge>\n              ))\n            )}\n          </div>\n          <ChevronDownIcon className=\"h-4 w-4 opacity-50 shrink-0\" />\n        </Button>\n      </PopoverTrigger>\n      <PopoverContent className=\"w-[--radix-popover-trigger-width] p-0\" align=\"start\">\n        <div className=\"max-h-60 overflow-auto\">\n          {options.map((option) => {\n            const isSelected = value.includes(option.value)\n            return (\n              <div\n                key={option.value}\n                className={cn(\n                  \"relative flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors\",\n                  isSelected && \"bg-accent text-accent-foreground\",\n                  !isSelected && \"hover:bg-accent hover:text-accent-foreground\",\n                  option.disabled && \"pointer-events-none opacity-50\"\n                )}\n                onClick={() => !option.disabled && handleSelect(option.value)}\n              >\n                <div className=\"flex items-center gap-2 flex-1\">\n                  <div\n                    className={cn(\n                      \"flex h-4 w-4 items-center justify-center rounded-sm border border-primary\",\n                      isSelected && \"bg-primary text-primary-foreground\"\n                    )}\n                  >\n                    {isSelected && <CheckIcon className=\"h-3 w-3\" />}\n                  </div>\n                  <span>{option.label}</span>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n        {maxCount && (\n          <div className=\"border-t border-border/60 px-2 py-1.5 text-xs text-muted-foreground\">\n            {value.length} / {maxCount} selected\n          </div>\n        )}\n      </PopoverContent>\n    </Popover>\n  )\n}\n\nexport { MultiSelect, type MultiSelectProps, type MultiSelectOption }\n"
    }
  ],
  "dependencies": ["lucide-react", "clsx", "tailwind-merge"],
  "registryDependencies": ["popover", "button", "badge"]
}
