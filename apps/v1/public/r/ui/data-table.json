{
  "$schema": "../registry-schema.json",
  "name": "data-table",
  "type": "ui",
  "description": "Data table component with sorting, filtering, and pagination",
  "files": [
    {
      "path": "components/ui/data-table.tsx",
      "type": "registry:ui",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport {\n  ChevronDownIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  ChevronsLeftIcon,\n  ChevronsRightIcon,\n} from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\"\n\ninterface DataTableProps<TData> {\n  data: TData[]\n  columns: ColumnDef<TData>[]\n  searchable?: boolean\n  pagination?: boolean\n  pageSize?: number\n  className?: string\n}\n\ninterface ColumnDef<TData> {\n  accessorKey?: keyof TData | string\n  header: string | React.ReactNode\n  cell?: (row: TData) => React.ReactNode\n  enableSorting?: boolean\n}\n\nfunction DataTable<TData extends Record<string, any>>({\n  data,\n  columns,\n  searchable = false,\n  pagination = true,\n  pageSize = 10,\n  className,\n}: DataTableProps<TData>) {\n  const [search, setSearch] = React.useState(\"\")\n  const [currentPage, setCurrentPage] = React.useState(1)\n  const [sorting, setSorting] = React.useState<{\n    column: string | null\n    direction: \"asc\" | \"desc\" | null\n  }>({ column: null, direction: null })\n\n  const filteredData = React.useMemo(() => {\n    let result = [...data]\n\n    // Search filter\n    if (searchable && search) {\n      result = result.filter((row) =>\n        Object.values(row).some((value) =>\n          String(value).toLowerCase().includes(search.toLowerCase())\n        )\n      )\n    }\n\n    // Sorting\n    if (sorting.column && sorting.direction) {\n      result.sort((a, b) => {\n        const aValue = a[sorting.column!]\n        const bValue = b[sorting.column!]\n        if (aValue < bValue) return sorting.direction === \"asc\" ? -1 : 1\n        if (aValue > bValue) return sorting.direction === \"asc\" ? 1 : -1\n        return 0\n      })\n    }\n\n    return result\n  }, [data, search, sorting, searchable])\n\n  const paginatedData = React.useMemo(() => {\n    if (!pagination) return filteredData\n    const start = (currentPage - 1) * pageSize\n    const end = start + pageSize\n    return filteredData.slice(start, end)\n  }, [filteredData, currentPage, pageSize, pagination])\n\n  const totalPages = Math.ceil(filteredData.length / pageSize)\n\n  const handleSort = (columnKey: string) => {\n    setSorting((prev) => {\n      if (prev.column === columnKey) {\n        if (prev.direction === \"asc\") {\n          return { column: columnKey, direction: \"desc\" }\n        }\n        if (prev.direction === \"desc\") {\n          return { column: null, direction: null }\n        }\n      }\n      return { column: columnKey, direction: \"asc\" }\n    })\n  }\n\n  return (\n    <div className={cn(\"space-y-4\", className)}>\n      {searchable && (\n        <div className=\"flex items-center gap-2\">\n          <input\n            type=\"text\"\n            placeholder=\"Search...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"flex h-9 w-full rounded-md border border-border bg-background px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50\"\n          />\n        </div>\n      )}\n\n      <div className=\"rounded-md border border-border/60\">\n        <Table>\n          <TableHeader>\n            <TableRow>\n              {columns.map((column, index) => (\n                <TableHead\n                  key={index}\n                  className={cn(\n                    column.enableSorting && \"cursor-pointer select-none hover:bg-muted/50\"\n                  )}\n                  onClick={() =>\n                    column.enableSorting && column.accessorKey\n                      ? handleSort(String(column.accessorKey))\n                      : undefined\n                  }\n                >\n                  <div className=\"flex items-center gap-2\">\n                    {typeof column.header === \"string\" ? (\n                      <span>{column.header}</span>\n                    ) : (\n                      column.header\n                    )}\n                    {column.enableSorting &&\n                      sorting.column === String(column.accessorKey) && (\n                        <span className=\"text-xs text-muted-foreground\">\n                          {sorting.direction === \"asc\" ? \"↑\" : \"↓\"}\n                        </span>\n                      )}\n                  </div>\n                </TableHead>\n              ))}\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {paginatedData.length === 0 ? (\n              <TableRow>\n                <TableCell\n                  colSpan={columns.length}\n                  className=\"h-24 text-center text-muted-foreground\"\n                >\n                  No results found.\n                </TableCell>\n              </TableRow>\n            ) : (\n              paginatedData.map((row, rowIndex) => (\n                <TableRow key={rowIndex}>\n                  {columns.map((column, colIndex) => (\n                    <TableCell key={colIndex}>\n                      {column.cell\n                        ? column.cell(row)\n                        : column.accessorKey\n                          ? String(row[column.accessorKey] ?? \"\")\n                          : \"\"}\n                    </TableCell>\n                  ))}\n                </TableRow>\n              ))\n            )}\n          </TableBody>\n        </Table>\n      </div>\n\n      {pagination && totalPages > 1 && (\n        <div className=\"flex items-center justify-between\">\n          <div className=\"text-sm text-muted-foreground\">\n            Showing {(currentPage - 1) * pageSize + 1} to{\" \"}\n            {Math.min(currentPage * pageSize, filteredData.length)} of{\" \"}\n            {filteredData.length} results\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              motion=\"none\"\n              onClick={() => setCurrentPage(1)}\n              disabled={currentPage === 1}\n            >\n              <ChevronsLeftIcon className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              motion=\"none\"\n              onClick={() => setCurrentPage((prev) => Math.max(1, prev - 1))}\n              disabled={currentPage === 1}\n            >\n              <ChevronLeftIcon className=\"h-4 w-4\" />\n            </Button>\n            <div className=\"text-sm text-muted-foreground\">\n              Page {currentPage} of {totalPages}\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              motion=\"none\"\n              onClick={() =>\n                setCurrentPage((prev) => Math.min(totalPages, prev + 1))\n              }\n              disabled={currentPage === totalPages}\n            >\n              <ChevronRightIcon className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              motion=\"none\"\n              onClick={() => setCurrentPage(totalPages)}\n              disabled={currentPage === totalPages}\n            >\n              <ChevronsRightIcon className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport { DataTable, type DataTableProps, type ColumnDef }\n"
    }
  ],
  "dependencies": ["lucide-react", "clsx", "tailwind-merge"],
  "registryDependencies": ["table", "button"]
}
